<!doctype html><html lang=en-us><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge,chrome=1"><title>Secure Service Networking for AWS | REDtalks.live</title><meta name=viewport content="width=device-width,minimum-scale=1"><meta name=description content="Design Objectives Create a Reference Architecture for Secure Service Networking best practices on the AWS Cloud Platform.
Requirements Apply the Principles of Zero Trust security across multiple AWS platforms, e.g. EKS, ECS, and EC2."><meta name=generator content="Hugo 0.104.3"><meta name=robots content="noindex, nofollow"><link rel=stylesheet href=/ananke/css/main.min.css><meta property="og:title" content="Secure Service Networking for AWS"><meta property="og:description" content="Design Objectives Create a Reference Architecture for Secure Service Networking best practices on the AWS Cloud Platform.
Requirements Apply the Principles of Zero Trust security across multiple AWS platforms, e.g. EKS, ECS, and EC2."><meta property="og:type" content="article"><meta property="og:url" content="https://redtalkslive.github.io/architecture/secure-service-networking-for-aws/"><meta property="article:section" content="architecture"><meta itemprop=name content="Secure Service Networking for AWS"><meta itemprop=description content="Design Objectives Create a Reference Architecture for Secure Service Networking best practices on the AWS Cloud Platform.
Requirements Apply the Principles of Zero Trust security across multiple AWS platforms, e.g. EKS, ECS, and EC2."><meta itemprop=wordCount content="366"><meta itemprop=keywords content="Reference Architecture,Zero Trust,Security,AWS,"><meta name=twitter:card content="summary"><meta name=twitter:title content="Secure Service Networking for AWS"><meta name=twitter:description content="Design Objectives Create a Reference Architecture for Secure Service Networking best practices on the AWS Cloud Platform.
Requirements Apply the Principles of Zero Trust security across multiple AWS platforms, e.g. EKS, ECS, and EC2."></head><body class="ma0 avenir bg-near-white"><header><div class=bg-black><nav class="pv3 ph3 ph4-ns" role=navigation><div class="flex-l justify-between items-center center"><a href=/ class="f3 fw2 hover-white no-underline white-90 dib"><img src=/images/REDtalks.live-RedWhite.jpg class="w100 mw5-ns" alt=REDtalks.live></a><div class="flex-l items-center"><ul class="pl0 mr3"><li class="list f5 f4-ns fw4 dib pr3"><a class="hover-white no-underline white-90" href=/articles title="Articles page">Articles</a></li><li class="list f5 f4-ns fw4 dib pr3"><a class="hover-white no-underline white-90" href=/architecture title="Architecture page">Architecture</a></li><li class="list f5 f4-ns fw4 dib pr3"><a class="hover-white no-underline white-90" href=/kb title="Knowledgebase page">Knowledgebase</a></li><li class="list f5 f4-ns fw4 dib pr3"><a class="hover-white no-underline white-90" href=/search title="Search page">Search</a></li><li class="list f5 f4-ns fw4 dib pr3"><a class="hover-white no-underline white-90" href=/about/ title="About page">About</a></li></ul><div class=ananke-socials><a href=https://twitter.com/PearceNathan target=_blank class="twitter ananke-social-link link-transition stackoverflow link dib z-999 pt3 pt0-l mr1" title="Twitter link" rel=noopener aria-label="follow on Twitter——Opens in a new window"><span class=icon><svg style="enable-background:new 0 0 67 67" viewBox="0 0 67 67" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M37.167 22.283c-2.619.953-4.274 3.411-4.086 6.101l.063 1.038-1.048-.127c-3.813-.487-7.145-2.139-9.974-4.915l-1.383-1.377-.356 1.017c-.754 2.267-.272 4.661 1.299 6.271.838.89.649 1.017-.796.487-.503-.169-.943-.296-.985-.233-.146.149.356 2.076.754 2.839.545 1.06 1.655 2.097 2.871 2.712l1.027.487-1.215.021c-1.173.0-1.215.021-1.089.467.419 1.377 2.074 2.839 3.918 3.475l1.299.444-1.131.678c-1.676.976-3.646 1.526-5.616 1.568C19.775 43.256 19 43.341 19 43.405c0 .211 2.557 1.397 4.044 1.864 4.463 1.377 9.765.783 13.746-1.568 2.829-1.673 5.657-5 6.978-8.221.713-1.716 1.425-4.851 1.425-6.354.0-.975.063-1.102 1.236-2.267.692-.678 1.341-1.419 1.467-1.631.21-.403.188-.403-.88-.043-1.781.636-2.033.551-1.152-.402.649-.678 1.425-1.907 1.425-2.267.0-.063-.314.042-.671.233-.377.212-1.215.53-1.844.72l-1.131.361-1.027-.7c-.566-.381-1.361-.805-1.781-.932C39.766 21.902 38.131 21.944 37.167 22.283zM33 64C16.432 64 3 50.569 3 34S16.432 4 33 4s30 13.431 30 30S49.568 64 33 64z" style="fill-rule:evenodd;clip-rule:evenodd"/></svg></span><span class=new-window><svg height="8" style="enable-background:new 0 0 1000 1000" viewBox="0 0 1e3 1e3" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M598 128h298v298h-86V274L392 692l-60-60 418-418H598v-86zM810 810V512h86v298c0 46-40 86-86 86H214c-48 0-86-40-86-86V214c0-46 38-86 86-86h298v86H214v596h596z" style="fill-rule:evenodd;clip-rule:evenodd"/></svg></span></a><a href=https://github.com/REDtalksLive target=_blank class="github ananke-social-link link-transition stackoverflow link dib z-999 pt3 pt0-l mr1" title="GitHub link" rel=noopener aria-label="follow on GitHub——Opens in a new window"><span class=icon><svg style="enable-background:new 0 0 512 512" viewBox="0 0 512 512" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M256 32C132.3 32 32 134.8 32 261.7c0 101.5 64.2 187.5 153.2 217.9 11.2 2.1 15.3-5 15.3-11.1.0-5.5-.2-19.9-.3-39.1-62.3 13.9-75.5-30.8-75.5-30.8-10.2-26.5-24.9-33.6-24.9-33.6-20.3-14.3 1.5-14 1.5-14 22.5 1.6 34.3 23.7 34.3 23.7 20 35.1 52.4 25 65.2 19.1 2-14.8 7.8-25 14.2-30.7-49.7-5.8-102-25.5-102-113.5.0-25.1 8.7-45.6 23-61.6-2.3-5.8-10-29.2 2.2-60.8.0.0 18.8-6.2 61.6 23.5 17.9-5.1 37-7.6 56.1-7.7 19 .1 38.2 2.6 56.1 7.7 42.8-29.7 61.5-23.5 61.5-23.5 12.2 31.6 4.5 55 2.2 60.8 14.3 16.1 23 36.6 23 61.6.0 88.2-52.4 107.6-102.3 113.3 8 7.1 15.2 21.1 15.2 42.5.0 30.7-.3 55.5-.3 63 0 6.1 4 13.3 15.4 11C415.9 449.1 480 363.1 480 261.7 480 134.8 379.7 32 256 32z"/></svg></span><span class=new-window><svg height="8" style="enable-background:new 0 0 1000 1000" viewBox="0 0 1e3 1e3" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M598 128h298v298h-86V274L392 692l-60-60 418-418H598v-86zM810 810V512h86v298c0 46-40 86-86 86H214c-48 0-86-40-86-86V214c0-46 38-86 86-86h298v86H214v596h596z" style="fill-rule:evenodd;clip-rule:evenodd"/></svg></span></a></div></div></div></nav></div></header><main class=pb7 role=main><article class="flex-l flex-wrap justify-between mw8 center ph3"><header class="mt4 w-100"><aside class="instapaper_ignoref b helvetica tracked">ARCHITECTURE</aside><div id=sharing class="mt3 ananke-socials"><a href="https://twitter.com/share?url=https://redtalkslive.github.io/architecture/secure-service-networking-for-aws/&text=Secure%20Service%20Networking%20for%20AWS" class="ananke-social-link twitter no-underline" aria-label="share on Twitter"><span class=icon><svg style="enable-background:new 0 0 67 67" viewBox="0 0 67 67" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M37.167 22.283c-2.619.953-4.274 3.411-4.086 6.101l.063 1.038-1.048-.127c-3.813-.487-7.145-2.139-9.974-4.915l-1.383-1.377-.356 1.017c-.754 2.267-.272 4.661 1.299 6.271.838.89.649 1.017-.796.487-.503-.169-.943-.296-.985-.233-.146.149.356 2.076.754 2.839.545 1.06 1.655 2.097 2.871 2.712l1.027.487-1.215.021c-1.173.0-1.215.021-1.089.467.419 1.377 2.074 2.839 3.918 3.475l1.299.444-1.131.678c-1.676.976-3.646 1.526-5.616 1.568C19.775 43.256 19 43.341 19 43.405c0 .211 2.557 1.397 4.044 1.864 4.463 1.377 9.765.783 13.746-1.568 2.829-1.673 5.657-5 6.978-8.221.713-1.716 1.425-4.851 1.425-6.354.0-.975.063-1.102 1.236-2.267.692-.678 1.341-1.419 1.467-1.631.21-.403.188-.403-.88-.043-1.781.636-2.033.551-1.152-.402.649-.678 1.425-1.907 1.425-2.267.0-.063-.314.042-.671.233-.377.212-1.215.53-1.844.72l-1.131.361-1.027-.7c-.566-.381-1.361-.805-1.781-.932C39.766 21.902 38.131 21.944 37.167 22.283zM33 64C16.432 64 3 50.569 3 34S16.432 4 33 4s30 13.431 30 30S49.568 64 33 64z" style="fill-rule:evenodd;clip-rule:evenodd"/></svg></span></a></div><h1 class="f1 athelas mt3 mb1">Secure Service Networking for AWS</h1></header><div class="nested-copy-line-height lh-copy avenir bg-near-white f4 nested-links mid-gray pr4-l w-two-thirds-l"><h2 id=design-objectives>Design Objectives</h2><p>Create a Reference Architecture for Secure Service Networking best practices on the AWS Cloud Platform.</p><h3 id=requirements>Requirements</h3><p>Apply the <a href=https://redtalkslive.github.io/articles/072-princples-of-zero-trust/ title="Principles of Zero Trust">Principles of Zero Trust</a> security across multiple AWS platforms, e.g. EKS, ECS, and EC2.</p><h3 id=exclusions>Exclusions</h3><p>The underlying virtual infrastructure terraform deployment has not been hardened for production use. The focus is on the Secure Service Networking applied to said infrastructure.</p><hr><h2 id=design-considerations>Design Considerations</h2><h3 id=all-releases>All Releases</h3><h4 id=terraform-modules>Terraform Modules</h4><p>Consul is tested against AWS VPC Module 17.</p><h3 id=release-v030---replace-hcp-consul-w-self-managed-consul-to-support-vault-secrets-managements>RELEASE v0.3.0 - Replace HCP Consul w/ &lsquo;Self-managed&rsquo; Consul to support Vault Secrets managements</h3><p>The primary objective was to add &lsquo;Access Security&rsquo; (aka Data at Rest security) to the AWS platforms and Secure Service Networking platform. This requires the replacement of HCP Consul with &lsquo;self-managed&rsquo; (Manual Service install) Consul Enterprise.</p><p>The version 0.3.0 release goals included:</p><ul><li>Vault Secrest Management</li><li>Vault for Secure Service Network Certificate Authority</li><li>Vault for Gossip Key Rotation</li></ul><p>The objective was to add secure secrets management (HashiCorp Vault) enabling the application of Zero Trust Principles to both data in motion (service mesh/secure service networking) and data at rest (secrets management).</p><h3 id=release-v020---add-observability-with-jaeger-prometheus-and-grafana>RELEASE v0.2.0 - Add Observability with Jaeger, Prometheus, and Grafana</h3><p>The primary objective was to add observability to secure service networking.</p><p>The version 0.2.0 release goals included:</p><p>Add Observability:</p><ul><li>Enable Consul tracing in helm chart</li><li>Install Jaeger</li><li>Install Prometheus</li><li>Install Grafana</li></ul><p>Add more Troubleshooting:</p><ul><li>Add more kubectl remote exec examples</li><li>Add envoy container troubleshooting steps</li></ul><h3 id=release-v011---pin-all-the-terraform-versions>RELEASE v0.1.1 - Pin all the terraform versions</h3><ul><li>PIN all the versions for consistent good behavior.</li></ul><h3 id=release-v010---secure-service-netorking-across-eks-and-ecs-platforms>RELEASE v0.1.0 - Secure Service Netorking across EKS and ECS platforms</h3><p>The objective was to establish secure communications across multiple platforms and apply the principes of zero trust security to data in motion (machine to machine access). This release did not include secure secrets management and the application of zreo trust principles to data at rest (see v0.3.0).</p><p>The version 0.1.0 release goals included:</p><ul><li>1x HCP Consul cluster running Consul v1.11.x</li><li>3x VPCs</li><li>3x Consul Admin Partitions serving:<ul><li>2x EKS clusters</li><li>1x ECS clusters</li></ul></li></ul><hr><h2 id=known-issues>Known issues</h2><h3 id=v010---secure-service-netorking-across-eks-and-ecs-platforms>v0.1.0 - Secure Service Netorking across EKS and ECS platforms</h3><h3 id=v020---add-observability-with-jaeger-prometheus-and-grafana>v0.2.0 - Add Observability with Jaeger, Prometheus, and Grafana</h3><h3 id=v030---replace-hcp-consul-w-self-managed-consul-to-support-vault-secrets-managements>v0.3.0 - Replace HCP Consul w/ &lsquo;Self-managed Consul to support Vault Secrets managements</h3><ul class=pa0><li class="list di"><a href=/tags/reference-architecture/ class="link f5 grow no-underline br-pill ba ph3 pv2 mb2 dib black sans-serif">Reference Architecture</a></li><li class="list di"><a href=/tags/zero-trust/ class="link f5 grow no-underline br-pill ba ph3 pv2 mb2 dib black sans-serif">Zero Trust</a></li><li class="list di"><a href=/tags/security/ class="link f5 grow no-underline br-pill ba ph3 pv2 mb2 dib black sans-serif">Security</a></li><li class="list di"><a href=/tags/aws/ class="link f5 grow no-underline br-pill ba ph3 pv2 mb2 dib black sans-serif">AWS</a></li></ul><div class="mt6 instapaper_ignoref"><div id=disqus_thread></div><script type=application/javascript>window.disqus_config=function(){},function(){if(["localhost","127.0.0.1"].indexOf(window.location.hostname)!=-1){document.getElementById("disqus_thread").innerHTML="Disqus comments not available by default when the website is previewed locally.";return}var t=document,e=t.createElement("script");e.async=!0,e.src="//redtalkslive.disqus.com/embed.js",e.setAttribute("data-timestamp",+new Date),(t.head||t.body).appendChild(e)}()</script><noscript>Please enable JavaScript to view the <a href=https://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript><a href=https://disqus.com class=dsq-brlink>comments powered by <span class=logo-disqus>Disqus</span></a></div></div><aside class="w-30-l mt6-l"><div class="bg-light-gray pa3 nested-list-reset nested-copy-line-height nested-links"><p class="f5 b mb3">What's in this architecture</p><nav id=TableOfContents><ul><li><a href=#design-objectives>Design Objectives</a><ul><li><a href=#requirements>Requirements</a></li><li><a href=#exclusions>Exclusions</a></li></ul></li><li><a href=#design-considerations>Design Considerations</a><ul><li><a href=#all-releases>All Releases</a></li><li><a href=#release-v030---replace-hcp-consul-w-self-managed-consul-to-support-vault-secrets-managements>RELEASE v0.3.0 - Replace HCP Consul w/ &lsquo;Self-managed&rsquo; Consul to support Vault Secrets managements</a></li><li><a href=#release-v020---add-observability-with-jaeger-prometheus-and-grafana>RELEASE v0.2.0 - Add Observability with Jaeger, Prometheus, and Grafana</a></li><li><a href=#release-v011---pin-all-the-terraform-versions>RELEASE v0.1.1 - Pin all the terraform versions</a></li><li><a href=#release-v010---secure-service-netorking-across-eks-and-ecs-platforms>RELEASE v0.1.0 - Secure Service Netorking across EKS and ECS platforms</a></li></ul></li><li><a href=#known-issues>Known issues</a><ul><li><a href=#v010---secure-service-netorking-across-eks-and-ecs-platforms>v0.1.0 - Secure Service Netorking across EKS and ECS platforms</a></li><li><a href=#v020---add-observability-with-jaeger-prometheus-and-grafana>v0.2.0 - Add Observability with Jaeger, Prometheus, and Grafana</a></li><li><a href=#v030---replace-hcp-consul-w-self-managed-consul-to-support-vault-secrets-managements>v0.3.0 - Replace HCP Consul w/ &lsquo;Self-managed Consul to support Vault Secrets managements</a></li></ul></li></ul></nav></div><div class="bg-light-gray pa3 nested-list-reset nested-copy-line-height nested-links"><p class="f5 b mb3">Related</p><ul class="pa0 list"><li class=mb2><a href=/articles/072-princples-of-zero-trust/>#072 - The Principles of Zero Trust</a></li><li class=mb2><a href=/articles/066-simplifying-devsecops/>#066 - Simplifying DevSecOps</a></li><li class=mb2><a href=/articles/044-security-automation-w-benn-alp/>REDtalks.live #044 - Security Automation /w Benn Alp</a></li><li class=mb2><a href=/articles/018-enabling-the-docker-tcp-api-in-aws/>REDtalks #018 - Enabling the docker TCP API in AWS</a></li><li class=mb2><a href=/kb/ki/ki-hcp-consul-gossip-key-rotation/>KI: HCP Consul - No support for gossip key rotation</a></li></ul></div></aside></article></main><footer class="bg-black bottom-0 w-100 pa3" role=contentinfo><div class="flex justify-between"><a class="f4 fw4 hover-white no-underline white-70 dn dib-ns pv2 ph3" href=https://redtalkslive.github.io/>&copy; REDtalks.live 2022</a><div><div class=ananke-socials><a href=https://twitter.com/PearceNathan target=_blank class="twitter ananke-social-link link-transition stackoverflow link dib z-999 pt3 pt0-l mr1" title="Twitter link" rel=noopener aria-label="follow on Twitter——Opens in a new window"><span class=icon><svg style="enable-background:new 0 0 67 67" viewBox="0 0 67 67" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M37.167 22.283c-2.619.953-4.274 3.411-4.086 6.101l.063 1.038-1.048-.127c-3.813-.487-7.145-2.139-9.974-4.915l-1.383-1.377-.356 1.017c-.754 2.267-.272 4.661 1.299 6.271.838.89.649 1.017-.796.487-.503-.169-.943-.296-.985-.233-.146.149.356 2.076.754 2.839.545 1.06 1.655 2.097 2.871 2.712l1.027.487-1.215.021c-1.173.0-1.215.021-1.089.467.419 1.377 2.074 2.839 3.918 3.475l1.299.444-1.131.678c-1.676.976-3.646 1.526-5.616 1.568C19.775 43.256 19 43.341 19 43.405c0 .211 2.557 1.397 4.044 1.864 4.463 1.377 9.765.783 13.746-1.568 2.829-1.673 5.657-5 6.978-8.221.713-1.716 1.425-4.851 1.425-6.354.0-.975.063-1.102 1.236-2.267.692-.678 1.341-1.419 1.467-1.631.21-.403.188-.403-.88-.043-1.781.636-2.033.551-1.152-.402.649-.678 1.425-1.907 1.425-2.267.0-.063-.314.042-.671.233-.377.212-1.215.53-1.844.72l-1.131.361-1.027-.7c-.566-.381-1.361-.805-1.781-.932C39.766 21.902 38.131 21.944 37.167 22.283zM33 64C16.432 64 3 50.569 3 34S16.432 4 33 4s30 13.431 30 30S49.568 64 33 64z" style="fill-rule:evenodd;clip-rule:evenodd"/></svg></span><span class=new-window><svg height="8" style="enable-background:new 0 0 1000 1000" viewBox="0 0 1e3 1e3" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M598 128h298v298h-86V274L392 692l-60-60 418-418H598v-86zM810 810V512h86v298c0 46-40 86-86 86H214c-48 0-86-40-86-86V214c0-46 38-86 86-86h298v86H214v596h596z" style="fill-rule:evenodd;clip-rule:evenodd"/></svg></span></a><a href=https://github.com/REDtalksLive target=_blank class="github ananke-social-link link-transition stackoverflow link dib z-999 pt3 pt0-l mr1" title="GitHub link" rel=noopener aria-label="follow on GitHub——Opens in a new window"><span class=icon><svg style="enable-background:new 0 0 512 512" viewBox="0 0 512 512" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M256 32C132.3 32 32 134.8 32 261.7c0 101.5 64.2 187.5 153.2 217.9 11.2 2.1 15.3-5 15.3-11.1.0-5.5-.2-19.9-.3-39.1-62.3 13.9-75.5-30.8-75.5-30.8-10.2-26.5-24.9-33.6-24.9-33.6-20.3-14.3 1.5-14 1.5-14 22.5 1.6 34.3 23.7 34.3 23.7 20 35.1 52.4 25 65.2 19.1 2-14.8 7.8-25 14.2-30.7-49.7-5.8-102-25.5-102-113.5.0-25.1 8.7-45.6 23-61.6-2.3-5.8-10-29.2 2.2-60.8.0.0 18.8-6.2 61.6 23.5 17.9-5.1 37-7.6 56.1-7.7 19 .1 38.2 2.6 56.1 7.7 42.8-29.7 61.5-23.5 61.5-23.5 12.2 31.6 4.5 55 2.2 60.8 14.3 16.1 23 36.6 23 61.6.0 88.2-52.4 107.6-102.3 113.3 8 7.1 15.2 21.1 15.2 42.5.0 30.7-.3 55.5-.3 63 0 6.1 4 13.3 15.4 11C415.9 449.1 480 363.1 480 261.7 480 134.8 379.7 32 256 32z"/></svg></span><span class=new-window><svg height="8" style="enable-background:new 0 0 1000 1000" viewBox="0 0 1e3 1e3" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M598 128h298v298h-86V274L392 692l-60-60 418-418H598v-86zM810 810V512h86v298c0 46-40 86-86 86H214c-48 0-86-40-86-86V214c0-46 38-86 86-86h298v86H214v596h596z" style="fill-rule:evenodd;clip-rule:evenodd"/></svg></span></a></div></div></div></footer></body></html>